<html>
<head>
<title>gast.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #7a7e85;}
.s4 { color: #6aab73;}
.s5 { color: #2aacb8;}
.s6 { color: #5f826b; font-style: italic;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
gast.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">sys </span><span class="s0">as </span><span class="s1">_sys</span>
<span class="s0">import </span><span class="s1">ast </span><span class="s0">as </span><span class="s1">_ast</span>
<span class="s0">from </span><span class="s1">ast </span><span class="s0">import </span><span class="s1">boolop</span><span class="s2">, </span><span class="s1">cmpop</span><span class="s2">, </span><span class="s1">excepthandler</span><span class="s2">, </span><span class="s1">expr</span><span class="s2">, </span><span class="s1">expr_context</span><span class="s2">, </span><span class="s1">operator</span>
<span class="s0">from </span><span class="s1">ast </span><span class="s0">import </span><span class="s1">slice</span><span class="s2">, </span><span class="s1">stmt</span><span class="s2">, </span><span class="s1">unaryop</span><span class="s2">, </span><span class="s1">mod</span><span class="s2">, </span><span class="s1">AST</span>
<span class="s0">from </span><span class="s1">ast </span><span class="s0">import </span><span class="s1">iter_child_nodes</span><span class="s2">, </span><span class="s1">walk</span>

<span class="s0">try</span><span class="s2">:</span>
    <span class="s0">from </span><span class="s1">ast </span><span class="s0">import </span><span class="s1">TypeIgnore</span>
<span class="s0">except </span><span class="s1">ImportError</span><span class="s2">:</span>
    <span class="s0">class </span><span class="s1">TypeIgnore</span><span class="s2">(</span><span class="s1">AST</span><span class="s2">):</span>
        <span class="s0">pass</span>

<span class="s0">try</span><span class="s2">:</span>
    <span class="s0">from </span><span class="s1">ast </span><span class="s0">import </span><span class="s1">pattern</span>
<span class="s0">except </span><span class="s1">ImportError</span><span class="s2">:</span>
    <span class="s0">class </span><span class="s1">pattern</span><span class="s2">(</span><span class="s1">AST</span><span class="s2">):</span>
        <span class="s0">pass</span>


<span class="s0">try</span><span class="s2">:</span>
    <span class="s0">from </span><span class="s1">ast </span><span class="s0">import </span><span class="s1">type_param</span>
<span class="s0">except </span><span class="s1">ImportError</span><span class="s2">:</span>
    <span class="s0">class </span><span class="s1">type_param</span><span class="s2">(</span><span class="s1">AST</span><span class="s2">):</span>
        <span class="s0">pass</span>


<span class="s0">def </span><span class="s1">_make_node</span><span class="s2">(</span><span class="s1">Name</span><span class="s2">, </span><span class="s1">Fields</span><span class="s2">, </span><span class="s1">Attributes</span><span class="s2">, </span><span class="s1">Bases</span><span class="s2">):</span>

    <span class="s3"># This constructor is used a lot during conversion from ast to gast,</span>
    <span class="s3"># then as the primary way to build ast nodes. So we tried to optimized it</span>
    <span class="s3"># for speed and not for readability.</span>
    <span class="s0">def </span><span class="s1">create_node</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, *</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s1">len</span><span class="s2">(</span><span class="s1">args</span><span class="s2">) &gt; </span><span class="s1">len</span><span class="s2">(</span><span class="s1">Fields</span><span class="s2">):</span>
            <span class="s0">raise </span><span class="s1">TypeError</span><span class="s2">(</span>
                <span class="s4">&quot;{} constructor takes at most {} positional arguments&quot;</span><span class="s2">.</span>
                <span class="s1">format</span><span class="s2">(</span><span class="s1">Name</span><span class="s2">, </span><span class="s1">len</span><span class="s2">(</span><span class="s1">Fields</span><span class="s2">)))</span>

        <span class="s3"># it's faster to iterate rather than zipping or enumerate</span>
        <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range</span><span class="s2">(</span><span class="s1">len</span><span class="s2">(</span><span class="s1">args</span><span class="s2">)):</span>
            <span class="s1">setattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">Fields</span><span class="s2">[</span><span class="s1">i</span><span class="s2">], </span><span class="s1">args</span><span class="s2">[</span><span class="s1">i</span><span class="s2">])</span>
        <span class="s0">if </span><span class="s1">kwargs</span><span class="s2">:  </span><span class="s3"># cold branch</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">__dict__</span><span class="s2">.</span><span class="s1">update</span><span class="s2">(</span><span class="s1">kwargs</span><span class="s2">)</span>

    <span class="s1">setattr</span><span class="s2">(</span><span class="s1">_sys</span><span class="s2">.</span><span class="s1">modules</span><span class="s2">[</span><span class="s1">__name__</span><span class="s2">],</span>
            <span class="s1">Name</span><span class="s2">,</span>
            <span class="s1">type</span><span class="s2">(</span><span class="s1">Name</span><span class="s2">,</span>
                 <span class="s1">Bases</span><span class="s2">,</span>
                 <span class="s2">{</span><span class="s4">'__init__'</span><span class="s2">: </span><span class="s1">create_node</span><span class="s2">,</span>
                  <span class="s4">'_fields'</span><span class="s2">: </span><span class="s1">Fields</span><span class="s2">,</span>
                  <span class="s4">'_attributes'</span><span class="s2">: </span><span class="s1">Attributes</span><span class="s2">}))</span>


<span class="s1">_nodes </span><span class="s2">= (</span>
    <span class="s3"># mod</span>
    <span class="s2">(</span><span class="s4">'Module'</span><span class="s2">, ((</span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'type_ignores'</span><span class="s2">), (), (</span><span class="s1">mod</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Interactive'</span><span class="s2">, ((</span><span class="s4">'body'</span><span class="s2">,), (), (</span><span class="s1">mod</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Expression'</span><span class="s2">, ((</span><span class="s4">'body'</span><span class="s2">,), (), (</span><span class="s1">mod</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'FunctionType'</span><span class="s2">, ((</span><span class="s4">'argtypes'</span><span class="s2">, </span><span class="s4">'returns'</span><span class="s2">), (), (</span><span class="s1">mod</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Suite'</span><span class="s2">, ((</span><span class="s4">'body'</span><span class="s2">,), (), (</span><span class="s1">mod</span><span class="s2">,))),</span>

    <span class="s3"># stmt</span>
    <span class="s2">(</span><span class="s4">'FunctionDef'</span><span class="s2">, ((</span><span class="s4">'name'</span><span class="s2">, </span><span class="s4">'args'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'decorator_list'</span><span class="s2">, </span><span class="s4">'returns'</span><span class="s2">,</span>
                      <span class="s4">'type_comment'</span><span class="s2">, </span><span class="s4">'type_params'</span><span class="s2">),</span>
                     <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                     <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'AsyncFunctionDef'</span><span class="s2">, ((</span><span class="s4">'name'</span><span class="s2">, </span><span class="s4">'args'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'decorator_list'</span><span class="s2">, </span><span class="s4">'returns'</span><span class="s2">,</span>
                           <span class="s4">'type_comment'</span><span class="s2">, </span><span class="s4">'type_params'</span><span class="s2">,),</span>
                          <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                           <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                          <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'ClassDef'</span><span class="s2">, ((</span><span class="s4">'name'</span><span class="s2">, </span><span class="s4">'bases'</span><span class="s2">, </span><span class="s4">'keywords'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'decorator_list'</span><span class="s2">,</span>
                   <span class="s4">'type_params'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Return'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Delete'</span><span class="s2">, ((</span><span class="s4">'targets'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Assign'</span><span class="s2">, ((</span><span class="s4">'targets'</span><span class="s2">, </span><span class="s4">'value'</span><span class="s2">, </span><span class="s4">'type_comment'</span><span class="s2">),</span>
                <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'TypeAlias'</span><span class="s2">, ((</span><span class="s4">'name'</span><span class="s2">, </span><span class="s4">'type_params'</span><span class="s2">, </span><span class="s4">'value'</span><span class="s2">),</span>
                  <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'AugAssign'</span><span class="s2">, ((</span><span class="s4">'target'</span><span class="s2">, </span><span class="s4">'op'</span><span class="s2">, </span><span class="s4">'value'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'AnnAssign'</span><span class="s2">, ((</span><span class="s4">'target'</span><span class="s2">, </span><span class="s4">'annotation'</span><span class="s2">, </span><span class="s4">'value'</span><span class="s2">, </span><span class="s4">'simple'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Print'</span><span class="s2">, ((</span><span class="s4">'dest'</span><span class="s2">, </span><span class="s4">'values'</span><span class="s2">, </span><span class="s4">'nl'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'For'</span><span class="s2">, ((</span><span class="s4">'target'</span><span class="s2">, </span><span class="s4">'iter'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'orelse'</span><span class="s2">, </span><span class="s4">'type_comment'</span><span class="s2">),</span>
             <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
             <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'AsyncFor'</span><span class="s2">, ((</span><span class="s4">'target'</span><span class="s2">, </span><span class="s4">'iter'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'orelse'</span><span class="s2">, </span><span class="s4">'type_comment'</span><span class="s2">),</span>
                  <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'While'</span><span class="s2">, ((</span><span class="s4">'test'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'orelse'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'If'</span><span class="s2">, ((</span><span class="s4">'test'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'orelse'</span><span class="s2">,),</span>
            <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
            <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'With'</span><span class="s2">, ((</span><span class="s4">'items'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'type_comment'</span><span class="s2">),</span>
              <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'AsyncWith'</span><span class="s2">, ((</span><span class="s4">'items'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'type_comment'</span><span class="s2">),</span>
                   <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Match'</span><span class="s2">, ((</span><span class="s4">'subject'</span><span class="s2">, </span><span class="s4">'cases'</span><span class="s2">),</span>
                   <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Raise'</span><span class="s2">, ((</span><span class="s4">'exc'</span><span class="s2">, </span><span class="s4">'cause'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Try'</span><span class="s2">, ((</span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'handlers'</span><span class="s2">, </span><span class="s4">'orelse'</span><span class="s2">, </span><span class="s4">'finalbody'</span><span class="s2">,),</span>
             <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
             <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'TryStar'</span><span class="s2">, ((</span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'handlers'</span><span class="s2">, </span><span class="s4">'orelse'</span><span class="s2">, </span><span class="s4">'finalbody'</span><span class="s2">,),</span>
             <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
             <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Assert'</span><span class="s2">, ((</span><span class="s4">'test'</span><span class="s2">, </span><span class="s4">'msg'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Import'</span><span class="s2">, ((</span><span class="s4">'names'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'ImportFrom'</span><span class="s2">, ((</span><span class="s4">'module'</span><span class="s2">, </span><span class="s4">'names'</span><span class="s2">, </span><span class="s4">'level'</span><span class="s2">,),</span>
                    <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                    <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Exec'</span><span class="s2">, ((</span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'globals'</span><span class="s2">, </span><span class="s4">'locals'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Global'</span><span class="s2">, ((</span><span class="s4">'names'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Nonlocal'</span><span class="s2">, ((</span><span class="s4">'names'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Expr'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Pass'</span><span class="s2">, ((), (</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Break'</span><span class="s2">, ((), (</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Continue'</span><span class="s2">, ((),</span>
                  <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s1">stmt</span><span class="s2">,))),</span>

    <span class="s3"># expr</span>

    <span class="s2">(</span><span class="s4">'BoolOp'</span><span class="s2">, ((</span><span class="s4">'op'</span><span class="s2">, </span><span class="s4">'values'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'NamedExpr'</span><span class="s2">, ((</span><span class="s4">'target'</span><span class="s2">, </span><span class="s4">'value'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'BinOp'</span><span class="s2">, ((</span><span class="s4">'left'</span><span class="s2">, </span><span class="s4">'op'</span><span class="s2">, </span><span class="s4">'right'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'UnaryOp'</span><span class="s2">, ((</span><span class="s4">'op'</span><span class="s2">, </span><span class="s4">'operand'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Lambda'</span><span class="s2">, ((</span><span class="s4">'args'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'IfExp'</span><span class="s2">, ((</span><span class="s4">'test'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">, </span><span class="s4">'orelse'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Dict'</span><span class="s2">, ((</span><span class="s4">'keys'</span><span class="s2">, </span><span class="s4">'values'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Set'</span><span class="s2">, ((</span><span class="s4">'elts'</span><span class="s2">,),</span>
             <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
             <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'ListComp'</span><span class="s2">, ((</span><span class="s4">'elt'</span><span class="s2">, </span><span class="s4">'generators'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'SetComp'</span><span class="s2">, ((</span><span class="s4">'elt'</span><span class="s2">, </span><span class="s4">'generators'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'DictComp'</span><span class="s2">, ((</span><span class="s4">'key'</span><span class="s2">, </span><span class="s4">'value'</span><span class="s2">, </span><span class="s4">'generators'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'GeneratorExp'</span><span class="s2">, ((</span><span class="s4">'elt'</span><span class="s2">, </span><span class="s4">'generators'</span><span class="s2">,),</span>
                      <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                       <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                      <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Await'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Yield'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'YieldFrom'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Compare'</span><span class="s2">, ((</span><span class="s4">'left'</span><span class="s2">, </span><span class="s4">'ops'</span><span class="s2">, </span><span class="s4">'comparators'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Call'</span><span class="s2">, ((</span><span class="s4">'func'</span><span class="s2">, </span><span class="s4">'args'</span><span class="s2">, </span><span class="s4">'keywords'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Repr'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'FormattedValue'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">, </span><span class="s4">'conversion'</span><span class="s2">, </span><span class="s4">'format_spec'</span><span class="s2">,),</span>
                        <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                         <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                        <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'JoinedStr'</span><span class="s2">, ((</span><span class="s4">'values'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Constant'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">, </span><span class="s4">'kind'</span><span class="s2">),</span>
                  <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                  <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Attribute'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">, </span><span class="s4">'attr'</span><span class="s2">, </span><span class="s4">'ctx'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Subscript'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">, </span><span class="s4">'slice'</span><span class="s2">, </span><span class="s4">'ctx'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Starred'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">, </span><span class="s4">'ctx'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Name'</span><span class="s2">, ((</span><span class="s4">'id'</span><span class="s2">, </span><span class="s4">'ctx'</span><span class="s2">, </span><span class="s4">'annotation'</span><span class="s2">, </span><span class="s4">'type_comment'</span><span class="s2">),</span>
              <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'List'</span><span class="s2">, ((</span><span class="s4">'elts'</span><span class="s2">, </span><span class="s4">'ctx'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
              <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Tuple'</span><span class="s2">, ((</span><span class="s4">'elts'</span><span class="s2">, </span><span class="s4">'ctx'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s1">expr</span><span class="s2">,))),</span>

    <span class="s3"># expr_context</span>
    <span class="s2">(</span><span class="s4">'Load'</span><span class="s2">, ((), (), (</span><span class="s1">expr_context</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Store'</span><span class="s2">, ((), (), (</span><span class="s1">expr_context</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Del'</span><span class="s2">, ((), (), (</span><span class="s1">expr_context</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'AugLoad'</span><span class="s2">, ((), (), (</span><span class="s1">expr_context</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'AugStore'</span><span class="s2">, ((), (), (</span><span class="s1">expr_context</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Param'</span><span class="s2">, ((), (), (</span><span class="s1">expr_context</span><span class="s2">,))),</span>

    <span class="s3"># slice</span>
    <span class="s2">(</span><span class="s4">'Slice'</span><span class="s2">, ((</span><span class="s4">'lower'</span><span class="s2">, </span><span class="s4">'upper'</span><span class="s2">, </span><span class="s4">'step'</span><span class="s2">),</span>
               <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">,),</span>
               <span class="s2">(</span><span class="s1">slice</span><span class="s2">,))),</span>

    <span class="s3"># boolop</span>
    <span class="s2">(</span><span class="s4">'And'</span><span class="s2">, ((), (), (</span><span class="s1">boolop</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Or'</span><span class="s2">, ((), (), (</span><span class="s1">boolop</span><span class="s2">,))),</span>

    <span class="s3"># operator</span>
    <span class="s2">(</span><span class="s4">'Add'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Sub'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Mult'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'MatMult'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Div'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Mod'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Pow'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'LShift'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'RShift'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'BitOr'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'BitXor'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'BitAnd'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'FloorDiv'</span><span class="s2">, ((), (), (</span><span class="s1">operator</span><span class="s2">,))),</span>

    <span class="s3"># unaryop</span>
    <span class="s2">(</span><span class="s4">'Invert'</span><span class="s2">, ((), (), (</span><span class="s1">unaryop</span><span class="s2">, </span><span class="s1">AST</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Not'</span><span class="s2">, ((), (), (</span><span class="s1">unaryop</span><span class="s2">, </span><span class="s1">AST</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'UAdd'</span><span class="s2">, ((), (), (</span><span class="s1">unaryop</span><span class="s2">, </span><span class="s1">AST</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'USub'</span><span class="s2">, ((), (), (</span><span class="s1">unaryop</span><span class="s2">, </span><span class="s1">AST</span><span class="s2">,))),</span>

    <span class="s3"># cmpop</span>
    <span class="s2">(</span><span class="s4">'Eq'</span><span class="s2">, ((), (), (</span><span class="s1">cmpop</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'NotEq'</span><span class="s2">, ((), (), (</span><span class="s1">cmpop</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Lt'</span><span class="s2">, ((), (), (</span><span class="s1">cmpop</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'LtE'</span><span class="s2">, ((), (), (</span><span class="s1">cmpop</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Gt'</span><span class="s2">, ((), (), (</span><span class="s1">cmpop</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'GtE'</span><span class="s2">, ((), (), (</span><span class="s1">cmpop</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'Is'</span><span class="s2">, ((), (), (</span><span class="s1">cmpop</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'IsNot'</span><span class="s2">, ((), (), (</span><span class="s1">cmpop</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'In'</span><span class="s2">, ((), (), (</span><span class="s1">cmpop</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'NotIn'</span><span class="s2">, ((), (), (</span><span class="s1">cmpop</span><span class="s2">,))),</span>

    <span class="s3"># comprehension</span>
    <span class="s2">(</span><span class="s4">'comprehension'</span><span class="s2">, ((</span><span class="s4">'target'</span><span class="s2">, </span><span class="s4">'iter'</span><span class="s2">, </span><span class="s4">'ifs'</span><span class="s2">, </span><span class="s4">'is_async'</span><span class="s2">), (), (</span><span class="s1">AST</span><span class="s2">,))),</span>

    <span class="s3"># excepthandler</span>
    <span class="s2">(</span><span class="s4">'ExceptHandler'</span><span class="s2">, ((</span><span class="s4">'type'</span><span class="s2">, </span><span class="s4">'name'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">),</span>
                       <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                        <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                       <span class="s2">(</span><span class="s1">excepthandler</span><span class="s2">,))),</span>

    <span class="s3"># arguments</span>
    <span class="s2">(</span><span class="s4">'arguments'</span><span class="s2">, ((</span><span class="s4">'args'</span><span class="s2">, </span><span class="s4">'posonlyargs'</span><span class="s2">, </span><span class="s4">'vararg'</span><span class="s2">, </span><span class="s4">'kwonlyargs'</span><span class="s2">,</span>
                    <span class="s4">'kw_defaults'</span><span class="s2">, </span><span class="s4">'kwarg'</span><span class="s2">, </span><span class="s4">'defaults'</span><span class="s2">), (), (</span><span class="s1">AST</span><span class="s2">,))),</span>

    <span class="s3"># keyword</span>
    <span class="s2">(</span><span class="s4">'keyword'</span><span class="s2">, ((</span><span class="s4">'arg'</span><span class="s2">, </span><span class="s4">'value'</span><span class="s2">),</span>
                 <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                 <span class="s2">(</span><span class="s1">AST</span><span class="s2">,))),</span>

    <span class="s3"># alias</span>
    <span class="s2">(</span><span class="s4">'alias'</span><span class="s2">, ((</span><span class="s4">'name'</span><span class="s2">, </span><span class="s4">'asname'</span><span class="s2">),</span>
               <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
               <span class="s2">(</span><span class="s1">AST</span><span class="s2">,))),</span>

    <span class="s3"># withitem</span>
    <span class="s2">(</span><span class="s4">'withitem'</span><span class="s2">, ((</span><span class="s4">'context_expr'</span><span class="s2">, </span><span class="s4">'optional_vars'</span><span class="s2">), (), (</span><span class="s1">AST</span><span class="s2">,))),</span>

    <span class="s3"># match_case</span>
    <span class="s2">(</span><span class="s4">'match_case'</span><span class="s2">, ((</span><span class="s4">'pattern'</span><span class="s2">, </span><span class="s4">'guard'</span><span class="s2">, </span><span class="s4">'body'</span><span class="s2">), (), (</span><span class="s1">AST</span><span class="s2">,))),</span>

    <span class="s3"># pattern</span>
    <span class="s2">(</span><span class="s4">'MatchValue'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">,),</span>
                    <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                    <span class="s2">(</span><span class="s1">pattern</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'MatchSingleton'</span><span class="s2">, ((</span><span class="s4">'value'</span><span class="s2">,),</span>
                        <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                         <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                        <span class="s2">(</span><span class="s1">pattern</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'MatchSequence'</span><span class="s2">, ((</span><span class="s4">'patterns'</span><span class="s2">,),</span>
                       <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                        <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                       <span class="s2">(</span><span class="s1">pattern</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'MatchMapping'</span><span class="s2">, ((</span><span class="s4">'keys'</span><span class="s2">, </span><span class="s4">'patterns'</span><span class="s2">, </span><span class="s4">'rest'</span><span class="s2">),</span>
                      <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                       <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                      <span class="s2">(</span><span class="s1">pattern</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'MatchClass'</span><span class="s2">, ((</span><span class="s4">'cls'</span><span class="s2">, </span><span class="s4">'patterns'</span><span class="s2">, </span><span class="s4">'kwd_attrs'</span><span class="s2">, </span><span class="s4">'kwd_patterns'</span><span class="s2">),</span>
                    <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                     <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                    <span class="s2">(</span><span class="s1">pattern</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'MatchStar'</span><span class="s2">, ((</span><span class="s4">'name'</span><span class="s2">,),</span>
                   <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                    <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                   <span class="s2">(</span><span class="s1">pattern</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'MatchAs'</span><span class="s2">, ((</span><span class="s4">'pattern'</span><span class="s2">, </span><span class="s4">'name'</span><span class="s2">),</span>
                   <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                    <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                   <span class="s2">(</span><span class="s1">pattern</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'MatchOr'</span><span class="s2">, ((</span><span class="s4">'patterns'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                  <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                 <span class="s2">(</span><span class="s1">pattern</span><span class="s2">,))),</span>

    <span class="s3"># type_ignore</span>
    <span class="s2">(</span><span class="s4">'type_ignore'</span><span class="s2">, ((), (</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'tag'</span><span class="s2">), (</span><span class="s1">TypeIgnore</span><span class="s2">,))),</span>

    <span class="s3"># type_param</span>
    <span class="s2">(</span><span class="s4">'TypeVar'</span><span class="s2">, ((</span><span class="s4">'name'</span><span class="s2">, </span><span class="s4">'bound'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                  <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                 <span class="s2">(</span><span class="s1">type_param</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'ParamSpec'</span><span class="s2">, ((</span><span class="s4">'name'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                  <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                 <span class="s2">(</span><span class="s1">type_param</span><span class="s2">,))),</span>
    <span class="s2">(</span><span class="s4">'TypeVarTuple'</span><span class="s2">, ((</span><span class="s4">'name'</span><span class="s2">,),</span>
                 <span class="s2">(</span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">,</span>
                  <span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">),</span>
                 <span class="s2">(</span><span class="s1">type_param</span><span class="s2">,))),</span>
    <span class="s2">)</span>




<span class="s0">for </span><span class="s1">name</span><span class="s2">, </span><span class="s1">descr </span><span class="s0">in </span><span class="s1">_nodes</span><span class="s2">:</span>
    <span class="s1">_make_node</span><span class="s2">(</span><span class="s1">name</span><span class="s2">, *</span><span class="s1">descr</span><span class="s2">)</span>

<span class="s0">if </span><span class="s1">_sys</span><span class="s2">.</span><span class="s1">version_info</span><span class="s2">.</span><span class="s1">major </span><span class="s2">== </span><span class="s5">2</span><span class="s2">:</span>
    <span class="s0">from </span><span class="s2">.</span><span class="s1">ast2 </span><span class="s0">import </span><span class="s1">ast_to_gast</span><span class="s2">, </span><span class="s1">gast_to_ast</span>
<span class="s0">if </span><span class="s1">_sys</span><span class="s2">.</span><span class="s1">version_info</span><span class="s2">.</span><span class="s1">major </span><span class="s2">== </span><span class="s5">3</span><span class="s2">:</span>
    <span class="s0">from </span><span class="s2">.</span><span class="s1">ast3 </span><span class="s0">import </span><span class="s1">ast_to_gast</span><span class="s2">, </span><span class="s1">gast_to_ast</span>


<span class="s0">def </span><span class="s1">parse</span><span class="s2">(*</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">):</span>
    <span class="s0">return </span><span class="s1">ast_to_gast</span><span class="s2">(</span><span class="s1">_ast</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">(*</span><span class="s1">args</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">))</span>


<span class="s0">def </span><span class="s1">unparse</span><span class="s2">(</span><span class="s1">gast_obj</span><span class="s2">):</span>
    <span class="s0">from </span><span class="s2">.</span><span class="s1">unparser </span><span class="s0">import </span><span class="s1">unparse</span>
    <span class="s0">return </span><span class="s1">unparse</span><span class="s2">(</span><span class="s1">gast_obj</span><span class="s2">)</span>


<span class="s0">def </span><span class="s1">literal_eval</span><span class="s2">(</span><span class="s1">node_or_string</span><span class="s2">):</span>
    <span class="s0">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">node_or_string</span><span class="s2">, </span><span class="s1">AST</span><span class="s2">):</span>
        <span class="s1">node_or_string </span><span class="s2">= </span><span class="s1">gast_to_ast</span><span class="s2">(</span><span class="s1">node_or_string</span><span class="s2">)</span>
    <span class="s0">return </span><span class="s1">_ast</span><span class="s2">.</span><span class="s1">literal_eval</span><span class="s2">(</span><span class="s1">node_or_string</span><span class="s2">)</span>


<span class="s0">def </span><span class="s1">get_docstring</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">clean</span><span class="s2">=</span><span class="s0">True</span><span class="s2">):</span>
    <span class="s0">if not </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, (</span><span class="s1">FunctionDef</span><span class="s2">, </span><span class="s1">ClassDef</span><span class="s2">, </span><span class="s1">Module</span><span class="s2">)):</span>
        <span class="s0">raise </span><span class="s1">TypeError</span><span class="s2">(</span><span class="s4">&quot;%r can't have docstrings&quot; </span><span class="s2">% </span><span class="s1">node</span><span class="s2">.</span><span class="s1">__class__</span><span class="s2">.</span><span class="s1">__name__</span><span class="s2">)</span>
    <span class="s0">if </span><span class="s1">node</span><span class="s2">.</span><span class="s1">body </span><span class="s0">and </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">node</span><span class="s2">.</span><span class="s1">body</span><span class="s2">[</span><span class="s5">0</span><span class="s2">], </span><span class="s1">Expr</span><span class="s2">) </span><span class="s0">and </span><span class="s1">\</span>
       <span class="s1">isinstance</span><span class="s2">(</span><span class="s1">node</span><span class="s2">.</span><span class="s1">body</span><span class="s2">[</span><span class="s5">0</span><span class="s2">].</span><span class="s1">value</span><span class="s2">, </span><span class="s1">Constant</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s1">clean</span><span class="s2">:</span>
            <span class="s0">import </span><span class="s1">inspect</span>
            <span class="s1">holder </span><span class="s2">= </span><span class="s1">node</span><span class="s2">.</span><span class="s1">body</span><span class="s2">[</span><span class="s5">0</span><span class="s2">].</span><span class="s1">value</span>
            <span class="s0">return </span><span class="s1">inspect</span><span class="s2">.</span><span class="s1">cleandoc</span><span class="s2">(</span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">holder</span><span class="s2">, </span><span class="s1">holder</span><span class="s2">.</span><span class="s1">_fields</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]))</span>
        <span class="s0">return </span><span class="s1">node</span><span class="s2">.</span><span class="s1">body</span><span class="s2">[</span><span class="s5">0</span><span class="s2">].</span><span class="s1">value</span><span class="s2">.</span><span class="s1">s</span>


<span class="s3"># the following are directly imported from python3.8's Lib/ast.py  #</span>

<span class="s0">def </span><span class="s1">copy_location</span><span class="s2">(</span><span class="s1">new_node</span><span class="s2">, </span><span class="s1">old_node</span><span class="s2">):</span>
    <span class="s6">&quot;&quot;&quot; 
    Copy source location (`lineno`, `col_offset`, `end_lineno`, and 
    `end_col_offset` attributes) from *old_node* to *new_node* if possible, 
    and return *new_node*. 
    &quot;&quot;&quot;</span>
    <span class="s0">for </span><span class="s1">attr </span><span class="s0">in </span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">:</span>
        <span class="s0">if </span><span class="s1">attr </span><span class="s0">in </span><span class="s1">old_node</span><span class="s2">.</span><span class="s1">_attributes </span><span class="s0">and </span><span class="s1">attr </span><span class="s0">in </span><span class="s1">new_node</span><span class="s2">.</span><span class="s1">_attributes \</span>
           <span class="s0">and </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">old_node</span><span class="s2">, </span><span class="s1">attr</span><span class="s2">):</span>
            <span class="s1">setattr</span><span class="s2">(</span><span class="s1">new_node</span><span class="s2">, </span><span class="s1">attr</span><span class="s2">, </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">old_node</span><span class="s2">, </span><span class="s1">attr</span><span class="s2">))</span>
    <span class="s0">return </span><span class="s1">new_node</span>


<span class="s0">def </span><span class="s1">fix_missing_locations</span><span class="s2">(</span><span class="s1">node</span><span class="s2">):</span>
    <span class="s6">&quot;&quot;&quot; 
    When you compile a node tree with compile(), the compiler expects lineno 
    and col_offset attributes for every node that supports them.  This is 
    rather tedious to fill in for generated nodes, so this helper adds these 
    attributes recursively where not already set, by setting them to the values 
    of the parent node.  It works recursively starting at *node*. 
    &quot;&quot;&quot;</span>
    <span class="s0">def </span><span class="s1">_fix</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">lineno</span><span class="s2">, </span><span class="s1">col_offset</span><span class="s2">, </span><span class="s1">end_lineno</span><span class="s2">, </span><span class="s1">end_col_offset</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s4">'lineno' </span><span class="s0">in </span><span class="s1">node</span><span class="s2">.</span><span class="s1">_attributes</span><span class="s2">:</span>
            <span class="s0">if not </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s4">'lineno'</span><span class="s2">):</span>
                <span class="s1">node</span><span class="s2">.</span><span class="s1">lineno </span><span class="s2">= </span><span class="s1">lineno</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">lineno </span><span class="s2">= </span><span class="s1">node</span><span class="s2">.</span><span class="s1">lineno</span>
        <span class="s0">if </span><span class="s4">'end_lineno' </span><span class="s0">in </span><span class="s1">node</span><span class="s2">.</span><span class="s1">_attributes</span><span class="s2">:</span>
            <span class="s0">if not </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">):</span>
                <span class="s1">node</span><span class="s2">.</span><span class="s1">end_lineno </span><span class="s2">= </span><span class="s1">end_lineno</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">end_lineno </span><span class="s2">= </span><span class="s1">node</span><span class="s2">.</span><span class="s1">end_lineno</span>
        <span class="s0">if </span><span class="s4">'col_offset' </span><span class="s0">in </span><span class="s1">node</span><span class="s2">.</span><span class="s1">_attributes</span><span class="s2">:</span>
            <span class="s0">if not </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s4">'col_offset'</span><span class="s2">):</span>
                <span class="s1">node</span><span class="s2">.</span><span class="s1">col_offset </span><span class="s2">= </span><span class="s1">col_offset</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">col_offset </span><span class="s2">= </span><span class="s1">node</span><span class="s2">.</span><span class="s1">col_offset</span>
        <span class="s0">if </span><span class="s4">'end_col_offset' </span><span class="s0">in </span><span class="s1">node</span><span class="s2">.</span><span class="s1">_attributes</span><span class="s2">:</span>
            <span class="s0">if not </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s4">'end_col_offset'</span><span class="s2">):</span>
                <span class="s1">node</span><span class="s2">.</span><span class="s1">end_col_offset </span><span class="s2">= </span><span class="s1">end_col_offset</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">end_col_offset </span><span class="s2">= </span><span class="s1">node</span><span class="s2">.</span><span class="s1">end_col_offset</span>
        <span class="s0">for </span><span class="s1">child </span><span class="s0">in </span><span class="s1">iter_child_nodes</span><span class="s2">(</span><span class="s1">node</span><span class="s2">):</span>
            <span class="s1">_fix</span><span class="s2">(</span><span class="s1">child</span><span class="s2">, </span><span class="s1">lineno</span><span class="s2">, </span><span class="s1">col_offset</span><span class="s2">, </span><span class="s1">end_lineno</span><span class="s2">, </span><span class="s1">end_col_offset</span><span class="s2">)</span>
    <span class="s1">_fix</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">, </span><span class="s5">1</span><span class="s2">, </span><span class="s5">0</span><span class="s2">)</span>
    <span class="s0">return </span><span class="s1">node</span>


<span class="s0">def </span><span class="s1">increment_lineno</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">n</span><span class="s2">=</span><span class="s5">1</span><span class="s2">):</span>
    <span class="s6">&quot;&quot;&quot; 
    Increment the line number and end line number of each node in the tree 
    starting at *node* by *n*. This is useful to &quot;move code&quot; to a different 
    location in a file. 
    &quot;&quot;&quot;</span>
    <span class="s0">for </span><span class="s1">child </span><span class="s0">in </span><span class="s1">walk</span><span class="s2">(</span><span class="s1">node</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s4">'lineno' </span><span class="s0">in </span><span class="s1">child</span><span class="s2">.</span><span class="s1">_attributes</span><span class="s2">:</span>
            <span class="s1">child</span><span class="s2">.</span><span class="s1">lineno </span><span class="s2">= (</span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">child</span><span class="s2">, </span><span class="s4">'lineno'</span><span class="s2">, </span><span class="s5">0</span><span class="s2">) </span><span class="s0">or </span><span class="s5">0</span><span class="s2">) + </span><span class="s1">n</span>
        <span class="s0">if </span><span class="s4">'end_lineno' </span><span class="s0">in </span><span class="s1">child</span><span class="s2">.</span><span class="s1">_attributes</span><span class="s2">:</span>
            <span class="s1">child</span><span class="s2">.</span><span class="s1">end_lineno </span><span class="s2">= (</span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">child</span><span class="s2">, </span><span class="s4">'end_lineno'</span><span class="s2">, </span><span class="s5">0</span><span class="s2">) </span><span class="s0">or </span><span class="s5">0</span><span class="s2">) + </span><span class="s1">n</span>
    <span class="s0">return </span><span class="s1">node</span>

<span class="s0">if </span><span class="s1">_sys</span><span class="s2">.</span><span class="s1">version_info</span><span class="s2">.</span><span class="s1">major </span><span class="s2">== </span><span class="s5">3 </span><span class="s0">and </span><span class="s1">_sys</span><span class="s2">.</span><span class="s1">version_info</span><span class="s2">.</span><span class="s1">minor </span><span class="s2">&gt;= </span><span class="s5">13</span><span class="s2">:</span>
    <span class="s1">dump </span><span class="s2">= </span><span class="s1">_ast</span><span class="s2">.</span><span class="s1">dump</span>
<span class="s0">else</span><span class="s2">:</span>
    <span class="s3"># Code import from Lib/ast.py</span>
    <span class="s3">#</span>
    <span class="s3"># minor changes: getattr(x, y, ...) is None =&gt; getattr(x, y, 42) is None</span>
    <span class="s3">#</span>
    <span class="s0">def </span><span class="s1">dump</span><span class="s2">(</span>
        <span class="s1">node</span><span class="s2">, </span><span class="s1">annotate_fields</span><span class="s2">=</span><span class="s0">True</span><span class="s2">, </span><span class="s1">include_attributes</span><span class="s2">=</span><span class="s0">False</span><span class="s2">,</span>
        <span class="s3"># *,  # removed for compatibility with python2 :-/</span>
        <span class="s1">indent</span><span class="s2">=</span><span class="s0">None</span><span class="s2">, </span><span class="s1">show_empty</span><span class="s2">=</span><span class="s0">False</span><span class="s2">,</span>
    <span class="s2">):</span>
        <span class="s6">&quot;&quot;&quot; 
        Return a formatted dump of the tree in node.  This is mainly useful for 
        debugging purposes.  If annotate_fields is true (by default), 
        the returned string will show the names and the values for fields. 
        If annotate_fields is false, the result string will be more compact by 
        omitting unambiguous field names.  Attributes such as line 
        numbers and column offsets are not dumped by default.  If this is wanted, 
        include_attributes can be set to true.  If indent is a non-negative 
        integer or string, then the tree will be pretty-printed with that indent 
        level. None (the default) selects the single line representation. 
        If show_empty is False, then empty lists and fields that are None 
        will be omitted from the output for better readability. 
        &quot;&quot;&quot;</span>
        <span class="s0">def </span><span class="s1">_format</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">level</span><span class="s2">=</span><span class="s5">0</span><span class="s2">):</span>
            <span class="s0">if </span><span class="s1">indent </span><span class="s0">is not None</span><span class="s2">:</span>
                <span class="s1">level </span><span class="s2">+= </span><span class="s5">1</span>
                <span class="s1">prefix </span><span class="s2">= </span><span class="s4">'</span><span class="s0">\n</span><span class="s4">' </span><span class="s2">+ </span><span class="s1">indent </span><span class="s2">* </span><span class="s1">level</span>
                <span class="s1">sep </span><span class="s2">= </span><span class="s4">',</span><span class="s0">\n</span><span class="s4">' </span><span class="s2">+ </span><span class="s1">indent </span><span class="s2">* </span><span class="s1">level</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">prefix </span><span class="s2">= </span><span class="s4">''</span>
                <span class="s1">sep </span><span class="s2">= </span><span class="s4">', '</span>
            <span class="s0">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">AST</span><span class="s2">):</span>
                <span class="s1">cls </span><span class="s2">= </span><span class="s1">type</span><span class="s2">(</span><span class="s1">node</span><span class="s2">)</span>
                <span class="s1">args </span><span class="s2">= []</span>
                <span class="s1">args_buffer </span><span class="s2">= []</span>
                <span class="s1">allsimple </span><span class="s2">= </span><span class="s0">True</span>
                <span class="s1">keywords </span><span class="s2">= </span><span class="s1">annotate_fields</span>
                <span class="s0">for </span><span class="s1">name </span><span class="s0">in </span><span class="s1">node</span><span class="s2">.</span><span class="s1">_fields</span><span class="s2">:</span>
                    <span class="s0">try</span><span class="s2">:</span>
                        <span class="s1">value </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">name</span><span class="s2">)</span>
                    <span class="s0">except </span><span class="s1">AttributeError</span><span class="s2">:</span>
                        <span class="s1">keywords </span><span class="s2">= </span><span class="s0">True</span>
                        <span class="s0">continue</span>
                    <span class="s0">if </span><span class="s1">value </span><span class="s0">is None and </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">name</span><span class="s2">, </span><span class="s5">42</span><span class="s2">) </span><span class="s0">is None</span><span class="s2">:</span>
                        <span class="s1">keywords </span><span class="s2">= </span><span class="s0">True</span>
                        <span class="s0">continue</span>
                    <span class="s0">if </span><span class="s2">(</span>
                        <span class="s0">not </span><span class="s1">show_empty</span>
                        <span class="s0">and </span><span class="s2">(</span><span class="s1">value </span><span class="s0">is None or </span><span class="s1">value </span><span class="s2">== [])</span>
                        <span class="s3"># Special cases:</span>
                        <span class="s3"># `Constant(value=None)` and `MatchSingleton(value=None)`</span>
                        <span class="s0">and not </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, (</span><span class="s1">Constant</span><span class="s2">, </span><span class="s1">MatchSingleton</span><span class="s2">))</span>
                    <span class="s2">):</span>
                        <span class="s1">args_buffer</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s1">repr</span><span class="s2">(</span><span class="s1">value</span><span class="s2">))</span>
                        <span class="s0">continue</span>
                    <span class="s0">elif not </span><span class="s1">keywords</span><span class="s2">:</span>
                        <span class="s1">args</span><span class="s2">.</span><span class="s1">extend</span><span class="s2">(</span><span class="s1">args_buffer</span><span class="s2">)</span>
                        <span class="s1">args_buffer </span><span class="s2">= []</span>
                    <span class="s1">value</span><span class="s2">, </span><span class="s1">simple </span><span class="s2">= </span><span class="s1">_format</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">level</span><span class="s2">)</span>
                    <span class="s1">allsimple </span><span class="s2">= </span><span class="s1">allsimple </span><span class="s0">and </span><span class="s1">simple</span>
                    <span class="s0">if </span><span class="s1">keywords</span><span class="s2">:</span>
                        <span class="s1">args</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s4">'%s=%s' </span><span class="s2">% (</span><span class="s1">name</span><span class="s2">, </span><span class="s1">value</span><span class="s2">))</span>
                    <span class="s0">else</span><span class="s2">:</span>
                        <span class="s1">args</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>
                <span class="s0">if </span><span class="s1">include_attributes </span><span class="s0">and </span><span class="s1">node</span><span class="s2">.</span><span class="s1">_attributes</span><span class="s2">:</span>
                    <span class="s0">for </span><span class="s1">name </span><span class="s0">in </span><span class="s1">node</span><span class="s2">.</span><span class="s1">_attributes</span><span class="s2">:</span>
                        <span class="s0">try</span><span class="s2">:</span>
                            <span class="s1">value </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">name</span><span class="s2">)</span>
                        <span class="s0">except </span><span class="s1">AttributeError</span><span class="s2">:</span>
                            <span class="s0">continue</span>
                        <span class="s0">if </span><span class="s1">value </span><span class="s0">is None and </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">cls</span><span class="s2">, </span><span class="s1">name</span><span class="s2">, </span><span class="s5">42</span><span class="s2">) </span><span class="s0">is None</span><span class="s2">:</span>
                            <span class="s0">continue</span>
                        <span class="s1">value</span><span class="s2">, </span><span class="s1">simple </span><span class="s2">= </span><span class="s1">_format</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">level</span><span class="s2">)</span>
                        <span class="s1">allsimple </span><span class="s2">= </span><span class="s1">allsimple </span><span class="s0">and </span><span class="s1">simple</span>
                        <span class="s1">args</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s4">'%s=%s' </span><span class="s2">% (</span><span class="s1">name</span><span class="s2">, </span><span class="s1">value</span><span class="s2">))</span>
                <span class="s0">if </span><span class="s1">allsimple </span><span class="s0">and </span><span class="s1">len</span><span class="s2">(</span><span class="s1">args</span><span class="s2">) &lt;= </span><span class="s5">3</span><span class="s2">:</span>
                    <span class="s0">return </span><span class="s4">'%s(%s)' </span><span class="s2">% (</span><span class="s1">node</span><span class="s2">.</span><span class="s1">__class__</span><span class="s2">.</span><span class="s1">__name__</span><span class="s2">, </span><span class="s4">', '</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">args</span><span class="s2">)), </span><span class="s0">not </span><span class="s1">args</span>
                <span class="s0">return </span><span class="s4">'%s(%s%s)' </span><span class="s2">% (</span><span class="s1">node</span><span class="s2">.</span><span class="s1">__class__</span><span class="s2">.</span><span class="s1">__name__</span><span class="s2">, </span><span class="s1">prefix</span><span class="s2">, </span><span class="s1">sep</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">args</span><span class="s2">)), </span><span class="s0">False</span>
            <span class="s0">elif </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">list</span><span class="s2">):</span>
                <span class="s0">if not </span><span class="s1">node</span><span class="s2">:</span>
                    <span class="s0">return </span><span class="s4">'[]'</span><span class="s2">, </span><span class="s0">True</span>
                <span class="s0">return </span><span class="s4">'[%s%s]' </span><span class="s2">% (</span><span class="s1">prefix</span><span class="s2">, </span><span class="s1">sep</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s1">_format</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">level</span><span class="s2">)[</span><span class="s5">0</span><span class="s2">] </span><span class="s0">for </span><span class="s1">x </span><span class="s0">in </span><span class="s1">node</span><span class="s2">)), </span><span class="s0">False</span>
            <span class="s0">return </span><span class="s1">repr</span><span class="s2">(</span><span class="s1">node</span><span class="s2">), </span><span class="s0">True</span>

        <span class="s0">if not </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">AST</span><span class="s2">):</span>
            <span class="s0">raise </span><span class="s1">TypeError</span><span class="s2">(</span><span class="s4">'expected AST, got %r' </span><span class="s2">% </span><span class="s1">node</span><span class="s2">.</span><span class="s1">__class__</span><span class="s2">.</span><span class="s1">__name__</span><span class="s2">)</span>
        <span class="s0">if </span><span class="s1">indent </span><span class="s0">is not None and not </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">indent</span><span class="s2">, </span><span class="s1">str</span><span class="s2">):</span>
            <span class="s1">indent </span><span class="s2">= </span><span class="s4">' ' </span><span class="s2">* </span><span class="s1">indent</span>
        <span class="s0">return </span><span class="s1">_format</span><span class="s2">(</span><span class="s1">node</span><span class="s2">)[</span><span class="s5">0</span><span class="s2">]</span>
</pre>
</body>
</html>