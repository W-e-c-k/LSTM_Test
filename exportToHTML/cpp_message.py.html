<html>
<head>
<title>cpp_message.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #5f826b; font-style: italic;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
cpp_message.py</font>
</center></td></tr></table>
<pre><span class="s0"># Protocol Buffers - Google's data interchange format</span>
<span class="s0"># Copyright 2008 Google Inc.  All rights reserved.</span>
<span class="s0">#</span>
<span class="s0"># Use of this source code is governed by a BSD-style</span>
<span class="s0"># license that can be found in the LICENSE file or at</span>
<span class="s0"># https://developers.google.com/open-source/licenses/bsd</span>

<span class="s2">&quot;&quot;&quot;Protocol message implementation hooks for C++ implementation. 
 
Contains helper functions used to create protocol message classes from 
Descriptor objects at runtime backed by the protocol buffer C++ API. 
&quot;&quot;&quot;</span>

<span class="s1">__author__ </span><span class="s3">= </span><span class="s4">'tibell@google.com (Johan Tibell)'</span>

<span class="s5">from </span><span class="s1">google</span><span class="s3">.</span><span class="s1">protobuf</span><span class="s3">.</span><span class="s1">internal </span><span class="s5">import </span><span class="s1">api_implementation</span>


<span class="s0"># pylint: disable=protected-access</span>
<span class="s1">_message </span><span class="s3">= </span><span class="s1">api_implementation</span><span class="s3">.</span><span class="s1">_c_module</span>
<span class="s0"># TODO: Remove this import after fix api_implementation</span>
<span class="s5">if </span><span class="s1">_message </span><span class="s5">is None</span><span class="s3">:</span>
  <span class="s5">from </span><span class="s1">google</span><span class="s3">.</span><span class="s1">protobuf</span><span class="s3">.</span><span class="s1">pyext </span><span class="s5">import </span><span class="s1">_message</span>


<span class="s5">class </span><span class="s1">GeneratedProtocolMessageType</span><span class="s3">(</span><span class="s1">_message</span><span class="s3">.</span><span class="s1">MessageMeta</span><span class="s3">):</span>

  <span class="s2">&quot;&quot;&quot;Metaclass for protocol message classes created at runtime from Descriptors. 
 
  The protocol compiler currently uses this metaclass to create protocol 
  message classes at runtime.  Clients can also manually create their own 
  classes at runtime, as in this example: 
 
  mydescriptor = Descriptor(.....) 
  factory = symbol_database.Default() 
  factory.pool.AddDescriptor(mydescriptor) 
  MyProtoClass = factory.GetPrototype(mydescriptor) 
  myproto_instance = MyProtoClass() 
  myproto.foo_field = 23 
  ... 
 
  The above example will not work for nested types. If you wish to include them, 
  use reflection.MakeClass() instead of manually instantiating the class in 
  order to create the appropriate class structure. 
  &quot;&quot;&quot;</span>

  <span class="s0"># Must be consistent with the protocol-compiler code in</span>
  <span class="s0"># proto2/compiler/internal/generator.*.</span>
  <span class="s1">_DESCRIPTOR_KEY </span><span class="s3">= </span><span class="s4">'DESCRIPTOR'</span>
</pre>
</body>
</html>